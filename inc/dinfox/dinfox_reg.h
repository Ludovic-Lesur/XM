/*
 * dinfox_reg.h
 *
 *  Created on: 12 nov 2022
 *      Author: Ludo
 */

#ifndef __DINFOX_REG_H__
#define __DINFOX_REG_H__

#include "types.h"

/*** DINFOX registers address ***/

typedef enum {
	DINFOX_REG_ADDR_NODE_ID = 0,
	DINFOX_REG_ADDR_HW_VERSION,
	DINFOX_REG_ADDR_SW_VERSION_0,
	DINFOX_REG_ADDR_SW_VERSION_1,
	DINFOX_REG_ADDR_RESET_FLAGS,
	DINFOX_REG_ADDR_ERROR_STACK,
	DINFOX_REG_ADDR_STATUS_CONTROL_0,
	DINFOX_REG_ADDR_ANALOG_DATA_0,
	DINFOX_REG_ADDR_LAST
} DINFOX_register_address_t;

/*** DINFOX registers mask ***/

#define DINFOX_REG_NODE_ID_MASK_NODE_ADDR			0x0000007F
#define DINFOX_REG_NODE_ID_MASK_BOARD_ID			0x0000FF00

#define DINFOX_REG_HW_VERSION_MASK_MAJOR			0x000000FF
#define DINFOX_REG_HW_VERSION_MASK_MINOR			0x0000FF00

#define DINFOX_REG_SW_VERSION_0_MASK_MAJOR			0x000000FF
#define DINFOX_REG_SW_VERSION_0_MASK_MINOR			0x0000FF00
#define DINFOX_REG_SW_VERSION_0_MASK_COMMIT_INDEX	0x00FF0000
#define DINFOX_REG_SW_VERSION_0_MASK_DTYF			0x01000000

#define DINFOX_REG_SW_VERSION_1_MASK_COMMIT_ID		0x00FFFFFF

#define DINFOX_REG_RESET_FLAGS_MASK_ALL				0x000000FF
#define DINFOX_REG_RESET_FLAGS_MASK_FW				0x00000001
#define DINFOX_REG_RESET_FLAGS_MASK_OBL				0x00000002
#define DINFOX_REG_RESET_FLAGS_MASK_PIN				0x00000004
#define DINFOX_REG_RESET_FLAGS_MASK_POR				0x00000008
#define DINFOX_REG_RESET_FLAGS_MASK_SFT				0x00000010
#define DINFOX_REG_RESET_FLAGS_MASK_IWDG			0x00000020
#define DINFOX_REG_RESET_FLAGS_MASK_WWDG			0x00000040
#define DINFOX_REG_RESET_FLAGS_MASK_LPWR			0x00000080

#define DINFOX_REG_ERROR_STACK_MASK_ERROR			0x0000FFFF

#define DINFOX_REG_ANALOG_DATA_0_MASK_VMCU			0x0000FFFF
#define DINFOX_REG_ANALOG_DATA_0_MASK_TMCU			0x00FF0000

#define DINFOX_REG_STATUS_CONTROL_0_MASK_RTRG		0x00000001
#define DINFOX_REG_STATUS_CONTROL_0_MASK_MTRG		0x00000002

#endif /* __DINFOX_REG_H__ */
